<view class="container {{largeFont ? 'large-font' : ''}}">
  <!-- é¡µé¢æ ‡é¢˜ -->
  <view class="header">
    <text class="title">æˆ‘çš„ä»»åŠ¡</text>
  </view>

  <!-- æ ‡ç­¾é¡µåˆ‡æ¢ -->
  <view class="tabs">
    <view 
      wx:for="{{tabs}}" 
      wx:key="key"
      class="tab-item {{activeTab === item.key ? 'active' : ''}}"
      data-tab="{{item.key}}"
      bindtap="switchTab"
    >
      {{item.name}}
    </view>
  </view>

  <!-- åŠ è½½çŠ¶æ€ -->
  <view class="loading" wx:if="{{loading}}">
    <text>åŠ è½½ä¸­...</text>
  </view>

  <!-- ç©ºçŠ¶æ€ -->
  <view class="empty-state" wx:elif="{{isEmpty}}">
    <view class="empty-icon">ğŸ“‹</view>
    <text class="empty-text">{{activeTab === 'ongoing' ? 'æš‚æ— è¿›è¡Œä¸­çš„ä»»åŠ¡' : 'æš‚æ— å·²å®Œæˆçš„ä»»åŠ¡'}}</text>
    <text class="empty-tip">{{activeTab === 'ongoing' ? 'æ¥å–éœ€æ±‚åä»»åŠ¡ä¼šæ˜¾ç¤ºåœ¨è¿™é‡Œ' : 'å®Œæˆä»»åŠ¡åä¼šæ˜¾ç¤ºåœ¨è¿™é‡Œ'}}</text>
    <view class="empty-actions" wx:if="{{activeTab === 'ongoing'}}">
      <navigator url="/pages/test-task/test-task" class="empty-btn" open-type="navigate">
        åˆ›å»ºæµ‹è¯•ä»»åŠ¡
      </navigator>
    </view>
  </view>

  <!-- ä»»åŠ¡åˆ—è¡¨ -->
  <view class="task-list" wx:else>
    <view 
      wx:for="{{tasks}}" 
      wx:key="_id"
      class="task-item"
      data-task-id="{{item._id}}"
      bindtap="goToTaskDetail"
    >
      <!-- ä»»åŠ¡å¤´éƒ¨ä¿¡æ¯ -->
      <view class="task-header">
        <view class="task-title-section">
          <view class="task-title">{{item.title}}</view>
          <view class="task-type" wx:if="{{item.type === 'demand'}}">éœ€æ±‚æ¥å–</view>
          <view class="task-type" wx:if="{{item.type === 'application'}}">ç”³è¯·ä¸­</view>
        </view>
        <view class="task-status status-{{item.status}}">{{item.statusText}}</view>
      </view>

      <!-- ä»»åŠ¡æè¿° -->
      <view class="task-description">{{item.content || item.description}}</view>

      <!-- è¿›åº¦æ¡ -->
      <view class="progress-section" wx:if="{{activeTab === 'ongoing'}}">
        <view class="progress-label">è¿›åº¦: {{item.progressPercent}}%</view>
        <view class="progress-bar">
          <view class="progress-fill" style="width: {{item.progressPercent}}%"></view>
        </view>
      </view>

      <!-- ä»»åŠ¡åº•éƒ¨ä¿¡æ¯ -->
      <view class="task-footer">
        <view class="task-date">åˆ›å»ºæ—¶é—´: {{item.createdAtFormatted}}</view>
        <view class="task-arrow">></view>
      </view>
    </view>
  </view>
</view>